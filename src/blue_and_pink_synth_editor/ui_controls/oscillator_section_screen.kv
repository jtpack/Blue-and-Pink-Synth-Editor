#:kivy 2.1.0
#:import C kivy.utils.get_color_from_hex


<OscillatorSectionScreen@Screen>:
    name: 'oscillator'

    canvas.before:
        Color:
            rgba: C('#092042FF')
        SmoothRectangle:
            pos: self.pos
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: (root.height * 0.008, 0, root.height * 0.008, root.height * 0.008)
        spacing: root.height * 0.008

        # Top Bar
        TopBar:
            screen_name: root.name
            size_hint_y: 3/40
            corner_radius: root.height * 0.015
            right_button_is_settings: False
            right_button_transition: ''

        BoxLayout:
            orientation: 'horizontal'
            spacing: self.parent.spacing
            size_hint_y: 34/40

            LeftBar:
                size_hint: 1/12, 1
                screen_name: root.name
                corner_radius: root.height * 0.015

            ControlSection:
                screen_name: root.name
                corner_radius: root.height * 0.015

                param_name_color_string: '#ECBFEBFF'
                canvas.before:
                    Color:
                        rgba: C('#257CFFFF')

                    SmoothRoundedRectangle:
                        pos: self.pos
                        size: self.width, self.height
                        radius: [root.height * 0.015]

                SectionTitleLabel:
                    text: 'OSCILLATOR'
                    on_release:
                        app.root.transition = NoTransition()
                        app.root.current = 'main'
                        app.set_curr_screen_name('main')

                ParamsGrid:
                    # Top Row
                    #
                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_top_row'
                        title: 'PW'
                        param_name: 'osc.pulsewidth'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.osc_pulsewidth_value
                        lfo2_prop: app.osc_pulsewidth_lfo2
                        mod_wheel_prop: app.osc_pulsewidth_mod_wheel
                        velocity_prop: app.osc_pulsewidth_velocity
                        aftertouch_prop: app.osc_pulsewidth_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_top_row'
                        title: 'GLD'
                        param_name: 'pitch.glide'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.pitch_glide_value
                        lfo2_prop: app.pitch_glide_lfo2
                        mod_wheel_prop: app.pitch_glide_mod_wheel
                        velocity_prop: app.pitch_glide_velocity
                        aftertouch_prop: app.pitch_glide_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_top_row'
                        title: 'DTN'
                        param_name: 'pitch.detune'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.pitch_detune_value
                        lfo2_prop: app.pitch_detune_lfo2
                        mod_wheel_prop: app.pitch_detune_mod_wheel
                        velocity_prop: app.pitch_detune_velocity
                        aftertouch_prop: app.pitch_detune_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_top_row'
                        title: 'CHD'
                        param_name: 'pitch.chord'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.pitch_chord_value
                        lfo2_prop: app.pitch_chord_lfo2
                        mod_wheel_prop: app.pitch_chord_mod_wheel
                        velocity_prop: app.pitch_chord_velocity
                        aftertouch_prop: app.pitch_chord_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_top_row'
                        title: 'EG'
                        param_name: 'pitch.eg'
                        param_name_color_string: '#0010EEFF'
                        value_prop: app.pitch_eg_value
                        lfo2_prop: app.pitch_eg_lfo2
                        mod_wheel_prop: app.pitch_eg_mod_wheel
                        velocity_prop: app.pitch_eg_velocity
                        aftertouch_prop: app.pitch_eg_aftertouch

                    # Bottom Row
                    #
                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_bottom_row'
                        title: 'WAVE'
                        param_name: 'osc.wave'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.osc_wave_value
                        lfo2_prop: app.osc_wave_lfo2
                        mod_wheel_prop: app.osc_wave_mod_wheel
                        velocity_prop: app.osc_wave_velocity
                        aftertouch_prop: app.osc_wave_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_bottom_row'
                        title: 'LVL'
                        param_name: 'mix.osc'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.mix_osc_value
                        lfo2_prop: app.mix_osc_lfo2
                        mod_wheel_prop: app.mix_osc_mod_wheel
                        velocity_prop: app.mix_osc_velocity
                        aftertouch_prop: app.mix_osc_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_bottom_row'
                        title: 'SUB'
                        param_name: 'mix.sub'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.mix_sub_value
                        lfo2_prop: app.mix_sub_lfo2
                        mod_wheel_prop: app.mix_sub_mod_wheel
                        velocity_prop: app.mix_sub_velocity
                        aftertouch_prop: app.mix_sub_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_bottom_row'
                        title: 'NOISE'
                        param_name: 'mix.noise'
                        param_name_color_string: self.parent.parent.param_name_color_string
                        value_prop: app.mix_noise_value
                        lfo2_prop: app.mix_noise_lfo2
                        mod_wheel_prop: app.mix_noise_mod_wheel
                        velocity_prop: app.mix_noise_velocity
                        aftertouch_prop: app.mix_noise_aftertouch

                    SectionScreenParamsGridModCell:
                        screen_name: root.name
                        section_name: 'oscillator_bottom_row'
                        title: 'LFO1'
                        param_name_color_string: '#5500EEFF'
                        param_name: 'pitch.lfo1'
                        value_prop: app.pitch_lfo1_value
                        lfo2_prop: app.pitch_lfo1_lfo2
                        mod_wheel_prop: app.pitch_lfo1_mod_wheel
                        velocity_prop: app.pitch_lfo1_velocity
                        aftertouch_prop: app.pitch_lfo1_aftertouch

        BottomBar:
            screen_name: root.name
            size_hint_y: 3/40
            corner_radius: root.height * 0.015
